<!DOCTYPE html>
<html lang="ru">
<head>
    
    <meta charset="UTF-8">
  <link rel="icon" type="image/png" href="../assets/favicon.png">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forms & Inputs - Web Automation Torture Lab</title>
    <!-- –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã/–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ -->
    <link rel="stylesheet" href="../assets/indigo-styles.css"/>

    <!-- –§–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã: –ø–µ—Ä–µ–ª–∏–≤—ã/–≤–æ–ª–Ω—ã/–∞—É—Ä–∞/–∑–≤—ë–∑–¥—ã (–ø–æ–¥–∫–ª—é—á–∞—Ç—å –ü–û–°–õ–ï –±–∞–∑–æ–≤—ã—Ö) -->
    <link rel="stylesheet" href="../assets/aurora.css"/>
</head>
<body data-style="s2">
<!-- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–∏ –¥–ª—è –∑–≤—ë–∑–¥ -->
<div class="sky" aria-hidden="true"></div>
    <div class="layout">
        <header class="header">
            <div class="header-content">
                <div class="brand">
                <div class="brand-mark"><img src="../assets/logo.png" alt="Logo" class="brand-logo-img"></div>
                <div class="brand-text">
                    <div class="brand-title">Web Automation Torture Lab</div>
                </div>
            </div>
                <button class="theme-toggle" id="themeToggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                    <span class="theme-icon">üåô</span>
                </button>
            </div>
        </header>

        

        <main class="main">
            <div class="container">
                <a href="../index.html" class="back-link">–ù–∞–∑–∞–¥</a>
                <div class="page-header">
                    <h2 class="page-title">Forms & Inputs</h2>
                    <p class="page-description">–ü—Ä–æ–±–ª–µ–º—ã —Å —Ñ–æ—Ä–º–∞–º–∏: –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å–µ–ª–µ–∫—Ç—ã, –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è, controlled inputs, blur-—Ç—Ä–∏–≥–≥–µ—Ä—ã</p>
                </div>

                <div class="info-section" style="margin-bottom: 2rem;">
                    <h3 class="section-title">–ö–µ–π—Å—ã:</h3>
                    <div class="features-grid">
                        <div class="feature-card">
                            <h4>1. Custom select (–Ω–µ &lt;select&gt;)</h4>
                            <p>Dropdown div+ul, options –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –ø–æ—Ä—Ç–∞–ª–µ</p>
                            <a href="forms/custom-select.html" class="feature-link">–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å ‚Üí</a>
                        </div>
                        <div class="feature-card">
                            <h4>2. Masked input</h4>
                            <p>–¢–µ–ª–µ—Ñ–æ–Ω —Å –º–∞—Å–∫–æ–π + –∞–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</p>
                            <a href="forms/masked-input.html" class="feature-link">–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å ‚Üí</a>
                        </div>
                        <div class="feature-card">
                            <h4>3. Change triggers only on blur</h4>
                            <p>–ü–æ–ª–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ blur</p>
                            <a href="forms/change-on-blur.html" class="feature-link">–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å ‚Üí</a>
                        </div>
                        <div class="feature-card">
                            <h4>4. React-like controlled input</h4>
                            <p>–ü–æ–ª–µ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç—Å—è –∏ –∏–Ω–æ–≥–¥–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç value</p>
                            <a href="forms/controlled-input.html" class="feature-link">–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å ‚Üí</a>
                        </div>
                    </div>
                </div>

                <div class="stress-controls">
                    <button class="stress-btn" id="stressToggle">Toggle Stress Mode</button>
                </div>

                <div class="cases-grid" style="display: none;">
                    <!-- Case 1: Custom Select -->
                    <div class="case-card">
                        <h3 class="case-title">1. Custom select (–Ω–µ &lt;select&gt;)</h3>
                        
                        <div class="case-element" id="case1-element">
                            <label>–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é:</label>
                            <div id="custom-select" style="position: relative; margin-top: 0.5rem;">
                                <div id="select-trigger" style="padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer; background: var(--bg-secondary);">
                                    –í—ã–±–µ—Ä–∏—Ç–µ...
                                </div>
                                <ul id="select-options" class="hidden" style="position: absolute; top: 100%; left: 0; right: 0; background: var(--bg-card); border: 2px solid var(--border-color); border-radius: 8px; margin-top: 0.25rem; list-style: none; padding: 0.5rem 0; z-index: 1000; max-height: 200px; overflow-y: auto;">
                                    <li class="select-option" data-value="option1" style="padding: 0.75rem 1rem; cursor: pointer;">–û–ø—Ü–∏—è 1</li>
                                    <li class="select-option" data-value="option2" style="padding: 0.75rem 1rem; cursor: pointer;">–û–ø—Ü–∏—è 2</li>
                                    <li class="select-option" data-value="option3" style="padding: 0.75rem 1rem; cursor: pointer;">–û–ø—Ü–∏—è 3</li>
                                </ul>
                            </div>
                        </div>

                        <div class="problem-section">
                            <span class="section-label problem-label">Problem</span>
                            <div class="section-content">
                                Dropdown div+ul, options –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –ø–æ—Ä—Ç–∞–ª–µ (–≤ –∫–æ–Ω—Ü–µ body). –û–±—ã—á–Ω—ã–π Select –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, options –Ω–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
                            </div>
                        </div>

                        <div class="problem-section">
                            <span class="section-label why-label">Why it happens</span>
                            <div class="section-content">
                                –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–µ–ª–µ–∫—Ç—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç–∞–ª—ã –≤–Ω–µ DOM-–¥–µ—Ä–µ–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. Selenium Select –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å div —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏.
                            </div>
                        </div>

                        <div class="show-solution-wrapper">
                            <input type="text" class="solution-key-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ—à–µ–Ω–∏—è">
                            <button class="show-solution-btn" disabled>–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ</button>
                        </div>

                        <div class="solution-section solution-hidden">
                            <span class="section-label solution-label">Solution: Selenium (Python)</span>
                            <div class="code-wrapper">
                                <div class="code-header">
                                    <span class="code-label">Selenium (Python)</span>
                                    <button class="copy-btn" onclick="copyToClipboard(`from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

# 1. –ö–ª–∏–∫–∞–µ–º —Ç—Ä–∏–≥–≥–µ—Ä –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è dropdown
trigger = driver.find_element(By.ID, 'select-trigger')
trigger.click()

# 2. –ñ–¥—ë–º –ø–æ—è–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ options
WebDriverWait(driver, 10).until(
    EC.presence_of_element_located((By.ID, 'select-options'))
)

# 3. –ö–ª–∏–∫–∞–µ–º –Ω—É–∂–Ω—É—é –æ–ø—Ü–∏—é (–∏—â–µ–º –≤ body, –µ—Å–ª–∏ options –≤ –ø–æ—Ä—Ç–∞–ª–µ)
option = driver.find_element(By.XPATH, '//ul[@id=\"select-options\"]//li[@data-value=\"option2\"]')
option.click()

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –µ—Å–ª–∏ options –≤ –∫–æ–Ω—Ü–µ body
# option = driver.find_element(By.XPATH, '//body//li[@data-value=\"option2\"]')
# option.click()`, this)">Copy</button>
                                </div>
                                <pre class="code-block">from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

# 1. –ö–ª–∏–∫–∞–µ–º —Ç—Ä–∏–≥–≥–µ—Ä –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è dropdown
trigger = driver.find_element(By.ID, 'select-trigger')
trigger.click()

# 2. –ñ–¥—ë–º –ø–æ—è–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ options
WebDriverWait(driver, 10).until(
    EC.presence_of_element_located((By.ID, 'select-options'))
)

# 3. –ö–ª–∏–∫–∞–µ–º –Ω—É–∂–Ω—É—é –æ–ø—Ü–∏—é (–∏—â–µ–º –≤ body, –µ—Å–ª–∏ options –≤ –ø–æ—Ä—Ç–∞–ª–µ)
option = driver.find_element(By.XPATH, '//ul[@id="select-options"]//li[@data-value="option2"]')
option.click()

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –µ—Å–ª–∏ options –≤ –∫–æ–Ω—Ü–µ body
# option = driver.find_element(By.XPATH, '//body//li[@data-value="option2"]')
# option.click()</pre>
                            </div>
                        </div>

                        <div class="solution-section solution-hidden">
                            <span class="section-label solution-label">Solution: Playwright (TypeScript)</span>
                            <div class="code-wrapper">
                                <div class="code-header">
                                    <span class="code-label">Playwright (TypeScript)</span>
                                    <button class="copy-btn" onclick="copyToClipboard(`// –ò—Å–ø–æ–ª—å–∑—É–µ–º getByRole –¥–ª—è –ø–æ–∏—Å–∫–∞ listbox (–µ—Å–ª–∏ –µ—Å—Ç—å role)
await page.getByRole('combobox').click();
await page.getByRole('option', { name: '–û–ø—Ü–∏—è 2' }).click();

// –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º locator —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
const trigger = page.locator('#select-trigger');
await trigger.click();

const option = page.locator('[data-value=\"option2\"]');
await expect(option).toBeVisible();
await option.click();`, this)">Copy</button>
                                </div>
                                <pre class="code-block">// –ò—Å–ø–æ–ª—å–∑—É–µ–º getByRole –¥–ª—è –ø–æ–∏—Å–∫–∞ listbox (–µ—Å–ª–∏ –µ—Å—Ç—å role)
await page.getByRole('combobox').click();
await page.getByRole('option', { name: '–û–ø—Ü–∏—è 2' }).click();

// –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º locator —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
const trigger = page.locator('#select-trigger');
await trigger.click();

const option = page.locator('[data-value="option2"]');
await expect(option).toBeVisible();
await option.click();</pre>
                            </div>
                        </div>

                        <button class="trigger-btn" onclick="triggerCase1()">Trigger</button>

                        <div class="assert-section solution-hidden">
                            <div class="assert-title">How to assert it's fixed:</div>
                            <p>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–Ω–∞—è –æ–ø—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ç—Ä–∏–≥–≥–µ—Ä–µ</p>
                        </div>
                    </div>

                    <!-- Case 2: Masked Input -->
                    <div class="case-card">
                        <h3 class="case-title">2. Masked input</h3>
                        
                        <div class="case-element" id="case2-element">
                            <label>–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                            <input type="text" id="phone-input" placeholder="+7 (___) ___-__-__" style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 8px; margin-top: 0.5rem;">
                            <div id="phone-result" style="margin-top: 0.5rem; color: var(--text-secondary);"></div>
                        </div>

                        <div class="problem-section">
                            <span class="section-label problem-label">Problem</span>
                            <div class="section-content">
                                –¢–µ–ª–µ—Ñ–æ–Ω —Å –º–∞—Å–∫–æ–π + –∞–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. send_keys –≤—Å—Ç–∞–≤–ª—è–µ—Ç, –Ω–æ –º–∞—Å–∫–∞ –ª–æ–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ.
                            </div>
                        </div>

                        <div class="problem-section">
                            <span class="section-label why-label">Why it happens</span>
                            <div class="section-content">
                                –ú–∞—Å–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ input. –ë—ã—Å—Ç—Ä—ã–π –≤–≤–æ–¥ –∏–ª–∏ –≤—Å—Ç–∞–≤–∫–∞ –≤—Å–µ–≥–æ —Ç–µ–∫—Å—Ç–∞ —Å—Ä–∞–∑—É –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.
                            </div>
                        </div>

                        <div class="show-solution-wrapper">
                            <input type="text" class="solution-key-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ—à–µ–Ω–∏—è">
                            <button class="show-solution-btn" disabled>–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ</button>
                        </div>

                        <div class="solution-section solution-hidden">
                            <span class="section-label solution-label">Solution: Selenium (Python)</span>
                            <div class="code-wrapper">
                                <div class="code-header">
                                    <span class="code-label">Selenium (Python)</span>
                                    <button class="copy-btn" onclick="copyToClipboard(`from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

phone_input = driver.find_element(By.ID, 'phone-input')

# –í–∞—Ä–∏–∞–Ω—Ç 1: –û—á–∏—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Ctrl+A –∏ Backspace, –∑–∞—Ç–µ–º –≤–≤–æ–¥–∏—Ç—å –ø–æ —Å–∏–º–≤–æ–ª—É
phone_input.send_keys(Keys.CONTROL + 'a')
phone_input.send_keys(Keys.BACKSPACE)
phone_input.send_keys('9')
phone_input.send_keys('1')
phone_input.send_keys('2')
phone_input.send_keys('3')
phone_input.send_keys('4')
phone_input.send_keys('5')
phone_input.send_keys('6')
phone_input.send_keys('7')
phone_input.send_keys('8')
phone_input.send_keys('9')
phone_input.send_keys('0')

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å clear() –∏ –≤–≤–æ–¥–∏—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ
phone_input.clear()
for char in '91234567890':
    phone_input.send_keys(char)
    time.sleep(0.1)  # –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –º–∞—Å–∫–∏

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Ç–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
WebDriverWait(driver, 5).until(
    lambda d: len(d.find_element(By.ID, 'phone-input').get_attribute('value')) > 0
)`, this)">Copy</button>
                                </div>
                                <pre class="code-block">from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

phone_input = driver.find_element(By.ID, 'phone-input')

# –í–∞—Ä–∏–∞–Ω—Ç 1: –û—á–∏—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Ctrl+A –∏ Backspace, –∑–∞—Ç–µ–º –≤–≤–æ–¥–∏—Ç—å –ø–æ —Å–∏–º–≤–æ–ª—É
phone_input.send_keys(Keys.CONTROL + 'a')
phone_input.send_keys(Keys.BACKSPACE)
phone_input.send_keys('9')
phone_input.send_keys('1')
phone_input.send_keys('2')
phone_input.send_keys('3')
phone_input.send_keys('4')
phone_input.send_keys('5')
phone_input.send_keys('6')
phone_input.send_keys('7')
phone_input.send_keys('8')
phone_input.send_keys('9')
phone_input.send_keys('0')

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å clear() –∏ –≤–≤–æ–¥–∏—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ
phone_input.clear()
for char in '91234567890':
    phone_input.send_keys(char)
    time.sleep(0.1)  # –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –º–∞—Å–∫–∏

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Ç–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
WebDriverWait(driver, 5).until(
    lambda d: len(d.find_element(By.ID, 'phone-input').get_attribute('value')) > 0
)</pre>
                            </div>
                        </div>

                        <div class="solution-section solution-hidden">
                            <span class="section-label solution-label">Solution: Playwright (TypeScript)</span>
                            <div class="code-wrapper">
                                <div class="code-header">
                                    <span class="code-label">Playwright (TypeScript)</span>
                                    <button class="copy-btn" onclick="copyToClipboard(`const phoneInput = page.locator('#phone-input');

// –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fill (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç –∏ –≤–≤–æ–¥–∏—Ç)
await phoneInput.fill('91234567890');

// –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å type —Å delay –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–≤–æ–¥–∞
await phoneInput.clear();
await phoneInput.type('91234567890', { delay: 100 });

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Ç–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
await expect(phoneInput).toHaveValue(/\+7\s*\(\d{3}\)\s*\d{3}-\d{2}-\d{2}/);`, this)">Copy</button>
                                </div>
                                <pre class="code-block">const phoneInput = page.locator('#phone-input');

// –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fill (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç –∏ –≤–≤–æ–¥–∏—Ç)
await phoneInput.fill('91234567890');

// –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å type —Å delay –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–≤–æ–¥–∞
await phoneInput.clear();
await phoneInput.type('91234567890', { delay: 100 });

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Ç–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
await expect(phoneInput).toHaveValue(/\+7\s*\(\d{3}\)\s*\d{3}-\d{2}-\d{2}/);</pre>
                            </div>
                        </div>

                        <button class="trigger-btn" onclick="triggerCase2()">Trigger</button>

                        <div class="assert-section solution-hidden">
                            <div class="assert-title">How to assert it's fixed:</div>
                            <p>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–æ –º–∞—Å–∫–æ–π</p>
                        </div>
                    </div>

                    <!-- Case 3: Change triggers only on blur -->
                    <div class="case-card">
                        <h3 class="case-title">3. Change triggers only on blur</h3>
                        
                        <div class="case-element" id="case3-element">
                            <label>–ò–º—è:</label>
                            <input type="text" id="name-input" style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 8px; margin-top: 0.5rem;">
                            <div id="name-status" style="margin-top: 0.5rem; padding: 0.5rem; background: var(--bg-primary); border-radius: 8px; min-height: 30px;"></div>
                        </div>

                        <div class="problem-section">
                            <span class="section-label problem-label">Problem</span>
                            <div class="section-content">
                                –ü–æ–ª–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ blur. –¢–µ—Å—Ç –≤–∏–¥–∏—Ç value, –Ω–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞.
                            </div>
                        </div>

                        <div class="problem-section">
                            <span class="section-label why-label">Why it happens</span>
                            <div class="section-content">
                                –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–æ—Ä–º—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞ (blur event), –∞ –Ω–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º input.
                            </div>
                        </div>

                        <div class="show-solution-wrapper">
                            <input type="text" class="solution-key-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ—à–µ–Ω–∏—è">
                            <button class="show-solution-btn" disabled>–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ</button>
                        </div>

                        <div class="solution-section solution-hidden">
                            <span class="section-label solution-label">Solution: Selenium (Python)</span>
                            <div class="code-wrapper">
                                <div class="code-header">
                                    <span class="code-label">Selenium (Python)</span>
                                    <button class="copy-btn" onclick="copyToClipboard(`from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

name_input = driver.find_element(By.ID, 'name-input')

# 1. –í–≤–æ–¥–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ
name_input.send_keys('–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤')

# 2. –¢–µ—Ä—è–µ–º —Ñ–æ–∫—É—Å (–∫–ª–∏–∫ –≤–Ω–µ –ø–æ–ª—è –∏–ª–∏ Tab)
name_input.send_keys(Keys.TAB)

# –ò–ª–∏ –∫–ª–∏–∫–∞–µ–º –≤–Ω–µ –ø–æ–ª—è
# driver.find_element(By.TAG_NAME, 'body').click()

# 3. –ñ–¥—ë–º side effect (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞)
WebDriverWait(driver, 10).until(
    EC.text_to_be_present_in_element((By.ID, 'name-status'), '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤')
)`, this)">Copy</button>
                                </div>
                                <pre class="code-block">from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

name_input = driver.find_element(By.ID, 'name-input')

# 1. –í–≤–æ–¥–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ
name_input.send_keys('–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤')

# 2. –¢–µ—Ä—è–µ–º —Ñ–æ–∫—É—Å (–∫–ª–∏–∫ –≤–Ω–µ –ø–æ–ª—è –∏–ª–∏ Tab)
name_input.send_keys(Keys.TAB)

# –ò–ª–∏ –∫–ª–∏–∫–∞–µ–º –≤–Ω–µ –ø–æ–ª—è
# driver.find_element(By.TAG_NAME, 'body').click()

# 3. –ñ–¥—ë–º side effect (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞)
WebDriverWait(driver, 10).until(
    EC.text_to_be_present_in_element((By.ID, 'name-status'), '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤')
)</pre>
                            </div>
                        </div>

                        <div class="solution-section solution-hidden">
                            <span class="section-label solution-label">Solution: Playwright (TypeScript)</span>
                            <div class="code-wrapper">
                                <div class="code-header">
                                    <span class="code-label">Playwright (TypeScript)</span>
                                    <button class="copy-btn" onclick="copyToClipboard(`const nameInput = page.locator('#name-input');

// 1. –í–≤–æ–¥–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ
await nameInput.fill('–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤');

// 2. –¢–µ—Ä—è–µ–º —Ñ–æ–∫—É—Å
await nameInput.blur();

// –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Tab
// await nameInput.press('Tab');

// 3. –ñ–¥—ë–º side effect
await expect(page.locator('#name-status')).toContainText('–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤');`, this)">Copy</button>
                                </div>
                                <pre class="code-block">const nameInput = page.locator('#name-input');

// 1. –í–≤–æ–¥–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ
await nameInput.fill('–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤');

// 2. –¢–µ—Ä—è–µ–º —Ñ–æ–∫—É—Å
await nameInput.blur();

// –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Tab
// await nameInput.press('Tab');

// 3. –ñ–¥—ë–º side effect
await expect(page.locator('#name-status')).toContainText('–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤');</pre>
                            </div>
                        </div>

                        <button class="trigger-btn" onclick="triggerCase3()">Trigger</button>

                        <div class="assert-section solution-hidden">
                            <div class="assert-title">How to assert it's fixed:</div>
                            <p>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–∏–ª—Å—è –ø–æ—Å–ª–µ blur</p>
                        </div>
                    </div>

                    <!-- Case 4: React-like controlled input -->
                    <div class="case-card">
                        <h3 class="case-title">4. React-like controlled input (value resets)</h3>
                        
                        <div class="case-element" id="case4-element">
                            <label>–ë—ã—Å—Ç—Ä—ã–π –≤–≤–æ–¥:</label>
                            <input type="text" id="controlled-input" style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 8px; margin-top: 0.5rem;">
                            <div id="controlled-status" style="margin-top: 0.5rem; color: var(--text-secondary);"></div>
                        </div>

                        <div class="problem-section">
                            <span class="section-label problem-label">Problem</span>
                            <div class="section-content">
                                –ü–æ–ª–µ –Ω–∞ –∫–∞–∂–¥–æ–º keypress –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç—Å—è –∏ –∏–Ω–æ–≥–¥–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç value –µ—Å–ª–∏ –≤–≤–æ–¥ —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä—ã–π. Flaky input.
                            </div>
                        </div>

                        <div class="problem-section">
                            <span class="section-label why-label">Why it happens</span>
                            <div class="section-content">
                                Controlled –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç value —á–µ—Ä–µ–∑ state. –ë—ã—Å—Ç—Ä—ã–π –≤–≤–æ–¥ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ race condition –º–µ–∂–¥—É —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è.
                            </div>
                        </div>

                        <div class="show-solution-wrapper">
                            <input type="text" class="solution-key-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ—à–µ–Ω–∏—è">
                            <button class="show-solution-btn" disabled>–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ</button>
                        </div>

                        <div class="solution-section solution-hidden">
                            <span class="section-label solution-label">Solution: Selenium (Python)</span>
                            <div class="code-wrapper">
                                <div class="code-header">
                                    <span class="code-label">Selenium (Python)</span>
                                    <button class="copy-btn" onclick="copyToClipboard(`from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import time

controlled_input = driver.find_element(By.ID, 'controlled-input')

# –í–∞—Ä–∏–∞–Ω—Ç 1: –ú–µ–¥–ª–µ–Ω–Ω—ã–π –≤–≤–æ–¥ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
text = 'Test Value'
for char in text:
    controlled_input.send_keys(char)
    time.sleep(0.2)  # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Å–∏–º–≤–æ–ª–∞–º–∏
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —Å–±—Ä–æ—Å–∏–ª–æ—Å—å
    current_value = controlled_input.get_attribute('value')
    if not current_value or len(current_value) < len(text[:text.index(char) + 1]):
        # –ü–æ–≤—Ç–æ—Ä—è–µ–º –≤–≤–æ–¥ —Å–∏–º–≤–æ–ª–∞
        controlled_input.send_keys(char)

# –í–∞—Ä–∏–∞–Ω—Ç 2: –û—á–∏—Å—Ç–∏—Ç—å, –≤–≤–µ—Å—Ç–∏ –≤—Å—ë —Å—Ä–∞–∑—É, –ø–æ–¥–æ–∂–¥–∞—Ç—å —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
controlled_input.clear()
controlled_input.send_keys(text)
time.sleep(0.5)  # –î–∞—ë–º –≤—Ä–µ–º—è –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
WebDriverWait(driver, 5).until(
    lambda d: d.find_element(By.ID, 'controlled-input').get_attribute('value') == text
)`, this)">Copy</button>
                                </div>
                                <pre class="code-block">from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import time

controlled_input = driver.find_element(By.ID, 'controlled-input')

# –í–∞—Ä–∏–∞–Ω—Ç 1: –ú–µ–¥–ª–µ–Ω–Ω—ã–π –≤–≤–æ–¥ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
text = 'Test Value'
for char in text:
    controlled_input.send_keys(char)
    time.sleep(0.2)  # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Å–∏–º–≤–æ–ª–∞–º–∏
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —Å–±—Ä–æ—Å–∏–ª–æ—Å—å
    current_value = controlled_input.get_attribute('value')
    if not current_value or len(current_value) < len(text[:text.index(char) + 1]):
        # –ü–æ–≤—Ç–æ—Ä—è–µ–º –≤–≤–æ–¥ —Å–∏–º–≤–æ–ª–∞
        controlled_input.send_keys(char)

# –í–∞—Ä–∏–∞–Ω—Ç 2: –û—á–∏—Å—Ç–∏—Ç—å, –≤–≤–µ—Å—Ç–∏ –≤—Å—ë —Å—Ä–∞–∑—É, –ø–æ–¥–æ–∂–¥–∞—Ç—å —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
controlled_input.clear()
controlled_input.send_keys(text)
time.sleep(0.5)  # –î–∞—ë–º –≤—Ä–µ–º—è –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
WebDriverWait(driver, 5).until(
    lambda d: d.find_element(By.ID, 'controlled-input').get_attribute('value') == text
)</pre>
                            </div>
                        </div>

                        <div class="solution-section solution-hidden">
                            <span class="section-label solution-label">Solution: Playwright (TypeScript)</span>
                            <div class="code-wrapper">
                                <div class="code-header">
                                    <span class="code-label">Playwright (TypeScript)</span>
                                    <button class="copy-btn" onclick="copyToClipboard(`const controlledInput = page.locator('#controlled-input');
const text = 'Test Value';

// –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fill + waitForTimeout –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π
await controlledInput.fill(text);
await page.waitForTimeout(100); // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏

// –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å type —Å delay
await controlledInput.clear();
await controlledInput.type(text, { delay: 150 });

// –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å expect.poll –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
await expect.poll(async () => {
    await controlledInput.fill(text);
    return await controlledInput.inputValue();
}, {
    timeout: 5000
}).toBe(text);`, this)">Copy</button>
                                </div>
                                <pre class="code-block">const controlledInput = page.locator('#controlled-input');
const text = 'Test Value';

// –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fill + waitForTimeout –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π
await controlledInput.fill(text);
await page.waitForTimeout(100); // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏

// –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å type —Å delay
await controlledInput.clear();
await controlledInput.type(text, { delay: 150 });

// –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å expect.poll –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
await expect.poll(async () => {
    await controlledInput.fill(text);
    return await controlledInput.inputValue();
}, {
    timeout: 5000
}).toBe(text);</pre>
                            </div>
                        </div>

                        <button class="trigger-btn" onclick="triggerCase4()">Trigger</button>

                        <div class="assert-section solution-hidden">
                            <div class="assert-title">How to assert it's fixed:</div>
                            <p>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è</p>
                        </div>
                    </div>
                </div>

                <div class="info-section">
                    <h3 class="section-title">Checklist: —á—Ç–æ –∑–¥–µ—Å—å —Ç—Ä–µ–Ω–∏—Ä—É–µ–º</h3>
                    <ul class="checklist">
                        <li>–†–∞–±–æ—Ç–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Å–µ–ª–µ–∫—Ç–∞–º–∏ (–Ω–µ &lt;select&gt;)</li>
                        <li>–í–≤–æ–¥ –≤ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è –ø–æ —Å–∏–º–≤–æ–ª–∞–º</li>
                        <li>–û–∂–∏–¥–∞–Ω–∏–µ blur —Å–æ–±—ã—Ç–∏—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</li>
                        <li>–†–∞–±–æ—Ç–∞ —Å controlled inputs –∏ race conditions</li>
                        <li>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞</li>
                        <li>–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤ –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞</li>
                    </ul>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>Web Automation Torture Lab ¬© <span id="currentYear">2024</span> | –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ç–æ—Ä–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
        </footer>
    </div>

        </div>
    </div>

    <script src="../assets/highlight.js"></script>
    <script src="../assets/app.js"></script>
    <script>
        // Case-specific handlers
        function triggerCase1() {
            const trigger = document.getElementById('select-trigger');
            const options = document.getElementById('select-options');
            
            trigger.addEventListener('click', function() {
                options.classList.toggle('hidden');
            });
            
            options.querySelectorAll('.select-option').forEach(option => {
                option.addEventListener('click', function() {
                    trigger.textContent = this.textContent;
                    options.classList.add('hidden');
                });
            });
            
            trigger.click();
        }

        function triggerCase2() {
            const input = document.getElementById('phone-input');
            const result = document.getElementById('phone-result');
            
            input.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.startsWith('7')) value = value.substring(1);
                if (value.length > 10) value = value.substring(0, 10);
                
                let formatted = '+7';
                if (value.length > 0) {
                    formatted += ' (' + value.substring(0, 3);
                    if (value.length > 3) {
                        formatted += ') ' + value.substring(3, 6);
                        if (value.length > 6) {
                            formatted += '-' + value.substring(6, 8);
                            if (value.length > 8) {
                                formatted += '-' + value.substring(8, 10);
                            }
                        }
                    }
                }
                
                e.target.value = formatted;
                result.textContent = `–í–≤–µ–¥–µ–Ω–æ: ${value}`;
            });
            
            input.focus();
        }

        function triggerCase3() {
            const input = document.getElementById('name-input');
            const status = document.getElementById('name-status');
            
            input.addEventListener('blur', function() {
                status.textContent = `–ü—Ä–∏–º–µ–Ω–µ–Ω–æ: ${this.value}`;
                status.style.background = '#10B981';
            });
            
            input.focus();
        }

        let renderCount = 0;
        function triggerCase4() {
            const input = document.getElementById('controlled-input');
            const status = document.getElementById('controlled-status');
            
            input.addEventListener('input', function(e) {
                renderCount++;
                status.textContent = `–†–µ–Ω–¥–µ—Ä–æ–≤: ${renderCount}`;
                
                // –ò–Ω–æ–≥–¥–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º –≤–≤–æ–¥–µ
                if (Math.random() > 0.7 && e.target.value.length > 3) {
                    setTimeout(() => {
                        if (Math.random() > 0.5) {
                            e.target.value = e.target.value.substring(0, e.target.value.length - 1);
                        }
                    }, 50);
                }
            });
            
            input.focus();
        }

        // Stress mode toggle
        document.getElementById('stressToggle')?.addEventListener('click', function() {
            window.stressMode.toggle();
            this.classList.toggle('active');
            this.textContent = window.stressMode.enabled ? 'Stress Mode: ON' : 'Stress Mode: OFF';
        });
    </script>



</body>
</html>

