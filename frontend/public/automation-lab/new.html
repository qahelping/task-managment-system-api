<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8"/>
  <link rel="icon" type="image/png" href="assets/favicon.png">

    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>–ö–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ ‚Äî Indigo + Aurora</title>

    <!-- –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã/–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ -->
    <link rel="stylesheet" href="assets/indigo-styles.css"/>

    <!-- –§–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã: –ø–µ—Ä–µ–ª–∏–≤—ã/–≤–æ–ª–Ω—ã/–∞—É—Ä–∞/–ª—É–Ω–∞/–∑–≤—ë–∑–¥—ã (–ø–æ–¥–∫–ª—é—á–∞—Ç—å –ü–û–°–õ–ï –±–∞–∑–æ–≤—ã—Ö) -->
    <link rel="stylesheet" href="assets/aurora.css"/>

    <!-- –°—Ç–∏–ª–∏ –¥–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ -->
    <link rel="stylesheet" href="assets/cards-styles.css"/>
    
    <style>
        /* –õ–æ–∞–¥–µ—Ä –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .cards-loader {
            grid-column: 1 / -1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 4rem 2rem;
            gap: 1.5rem;
        }
        
        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(124, 92, 255, 0.2);
            border-top-color: rgba(124, 92, 255, 0.9);
            border-right-color: rgba(99, 166, 255, 0.7);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loader-text {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
            font-weight: 500;
            letter-spacing: 0.5px;
        }
        
        .loader-dots {
            display: inline-flex;
            gap: 6px;
            margin-top: 0.5rem;
        }
        
        .loader-dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(124, 92, 255, 0.6);
            animation: pulse 1.4s ease-in-out infinite;
        }
        
        .loader-dots span:nth-child(1) { animation-delay: 0s; }
        .loader-dots span:nth-child(2) { animation-delay: 0.2s; }
        .loader-dots span:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes pulse {
            0%, 100% { 
                opacity: 0.4;
                transform: scale(0.8);
            }
            50% { 
                opacity: 1;
                transform: scale(1.2);
                background: rgba(99, 166, 255, 0.9);
            }
        }
    </style>
</head>

<body data-style="s2">
<!-- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–∏ –¥–ª—è –∑–≤—ë–∑–¥ –∏ –ª—É–Ω—ã -->
<div class="sky" aria-hidden="true"></div>
<div class="moon" aria-hidden="true"></div>

<div class="layout">
    <header class="header">
        <div class="header-content">
            <div class="brand">
                <div class="brand-mark"><img src="assets/logo.png" alt="Logo" class="brand-logo-img"></div>
                <div class="brand-text">
                    <div class="brand-title">Web Automation Torture Lab</div>
                    <div class="brand-subtitle">Async & Dynamic ‚Ä¢ Data Cards</div>
                </div>
            </div>
        </div>
    </header>

    

    <main class="main">
        <div class="container">
            <div class="page-header">
                <a href="#" class="back-link">‚Üê –ù–∞–∑–∞–¥ –∫ Data Cards</a>
                <h2 class="page-title">–ö–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ</h2>
                <p class="page-description">
                    –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–æ–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ fake network delay. –¢–µ—Å—Ç –∏—â–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Å—Ä–∞–∑—É ‚Üí NoSuchElement/timeout.
                </p>
            </div>

            <section class="case-card">
                <div class="case-head">
                    <div class="case-head__left">
                        <div class="case-icon">üß©</div>
                        <div>
                            <h3 class="case-title">–ö–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ</h3>

                        </div>
                    </div>

                    <div class="case-head__right">
                        <button class="trigger-btn" id="reloadCardsBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏</button>
                    </div>
                </div>

                <div class="case-element" style="background: transparent; padding: 18px;">
                    <div class="cards-grid" id="bankCardsGrid" style="grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 18px; width: 100%;">
                        <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ API -->
                    </div>
                </div>

                <div class="sections">
                    <div class="info-card info-card--problem">
                        <div class="info-title">
                            <span class="tag tag--problem">Problem</span>
                        </div>
                        <div class="info-text">
                            –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–æ–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ <code>setTimeout</code> / fake delay. –¢–µ—Å—Ç –∏—â–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Å—Ä–∞–∑—É ‚Üí
                            –æ—à–∏–±–∫–∞.
                        </div>
                    </div>

                    <div class="info-card info-card--why">
                        <div class="info-title">
                            <span class="tag tag--why">Why it happens</span>
                        </div>
                        <div class="info-text">
                            –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö: –Ω—É–∂–Ω–∞—è <code>cardId</code> –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–∑–∂–µ. –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
                            <code>sleep</code> –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã.
                        </div>
                    </div>

                    <div class="solution-gate">
                        <input class="solution-key-input" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ—à–µ–Ω–∏—è"/>
                        <button class="show-solution-btn" disabled>–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ</button>
                    </div>

                    <div class="solution-grid">
                        <article class="solution-card">
                            <div class="solution-card__head">
                                <span class="tag tag--solution">Solution: Selenium (Python)</span>
                                <button class="copy-btn">Copy</button>
                            </div>
                            <pre class="code-block"><code>from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait

card = WebDriverWait(driver, 10).until(
    lambda d: d.find_element(By.CSS_SELECTOR, '[data-card-id="card-12345"]')
)</code></pre>
                        </article>
                        <div class="code-card">
                            <div class="code-card__header">
                                <div class="code-lang">
                                    <span class="code-dot"></span>
                                    Python
                                </div>

                                <button class="copy-btn" data-copy-target="#python-code-1">Copy</button>
                            </div>

                            <pre class="code-block"><code id="python-code-1" class="hljs language-python">
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait

def test_card_is_loaded(driver):
    card = WebDriverWait(driver, 10).until(
        lambda d: d.find_element(By.CSS_SELECTOR, '[data-card-id="card-12345"]')
    )
    assert card.is_displayed()
  </code></pre>
                        </div>


                        <article class="solution-card">

                            <div class="solution-card__head">
                                <span class="tag tag--solution">Solution: Playwright (TypeScript)</span>
                                <button class="copy-btn">Copy</button>
                            </div>
                            <pre class="code-block"><code>const card = page.locator('[data-card-id="card-12345"]');
await expect(card).toBeVisible({ timeout: 10000 });
await card.scrollIntoViewIfNeeded();</code></pre>
                        </article>
                    </div>

                    <div class="assert-card">
                        <div class="assert-title">How to assert it‚Äôs fixed</div>
                        <div class="assert-text">
                            –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∏–¥–∏–º–æ–π.
                        </div>
                    </div>
                </div>
            </section>

            <footer class="footer">
                Web Automation Torture Lab ¬© <span id="y">2026</span>
            </footer>
        </div>
    </main>
</div>

<script>
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π (s2)
    document.querySelectorAll('[data-set-style]').forEach(btn => {
      btn.addEventListener('click', () => {
        document.body.setAttribute('data-style', btn.dataset.setStyle);
      });
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
    document.getElementById('reloadCardsBtn')?.addEventListener('click', async () => {
        const btn = document.getElementById('reloadCardsBtn');
        const grid = document.getElementById('bankCardsGrid');
        
        if (!grid) return;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–æ–∞–¥–µ—Ä
        btn.disabled = true;
        btn.textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
        grid.innerHTML = `
            <div class="cards-loader">
                <div class="loader-spinner"></div>
                <div class="loader-text">
                    –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫
                    <div class="loader-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            </div>
        `;
        
        // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–µ—Ç–∏ (1-3 —Å–µ–∫—É–Ω–¥—ã)
        const delay = Math.random() * 2000 + 1000;
        
        setTimeout(async () => {
            try {
                // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏–∑ bank-cards.js
                if (window.bankCards && window.bankCards.renderCards) {
                    await window.bankCards.renderCards();
                } else {
                    throw new Error('–ú–æ–¥—É–ª—å bankCards –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫:', error);
                grid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; background: rgba(255,90,95,.1); border-radius: 16px; border: 2px solid rgba(255,90,95,.3);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">‚ö†Ô∏è</div>
                        <h3 style="color: rgba(255,90,95,.9); margin-bottom: 0.5rem;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h3>
                        <p style="color: rgba(255,255,255,.7);">${error.message || '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏'}</p>
                    </div>
                `;
            } finally {
                btn.disabled = false;
                btn.textContent = '–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏';
            }
        }, delay);
    });
</script>

<!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ -->
<script>
    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É, —á—Ç–æ–±—ã –æ–Ω–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å —Å—Ä–∞–∑—É
    // (–º—ã –±—É–¥–µ–º –≤—ã–∑—ã–≤–∞—Ç—å –µ—ë –≤—Ä—É—á–Ω—É—é —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π)
    window.__bankCardsAutoLoadDisabled = true;
</script>
<script src="assets/bank-cards.js"></script>

<script>
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    // (–¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏)
    (function() {
        const grid = document.getElementById('bankCardsGrid');
        if (!grid) {
            console.error('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä bankCardsGrid –Ω–µ –Ω–∞–π–¥–µ–Ω');
            return;
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–æ–∞–¥–µ—Ä
        grid.innerHTML = `
            <div class="cards-loader">
                <div class="loader-spinner"></div>
                <div class="loader-text">
                    –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫
                    <div class="loader-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            </div>
        `;
        
        // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–µ—Ç–∏ (1-3 —Å–µ–∫—É–Ω–¥—ã) –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
        const delay = Math.random() * 2000 + 1000;
        
        setTimeout(async () => {
            try {
                // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª—è bankCards
                let attempts = 0;
                const maxAttempts = 20; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
                
                while (!window.bankCards && attempts < maxAttempts) {
                    await new Promise(resolve => setTimeout(resolve, 100));
                    attempts++;
                }
                
                console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª—è bankCards:', {
                    exists: !!window.bankCards,
                    hasRenderCards: !!(window.bankCards && window.bankCards.renderCards),
                    attempts: attempts
                });
                
                if (window.bankCards && window.bankCards.renderCards) {
                    console.log('–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ —á–µ—Ä–µ–∑ bankCards.renderCards()...');
                    await window.bankCards.renderCards();
                    console.log('–ö–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω—ã
                    setTimeout(() => {
                        const renderedCards = grid.querySelectorAll('.card');
                        console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫:', renderedCards.length);
                        if (renderedCards.length === 0) {
                            console.warn('–ö–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω—ã –≤ DOM');
                        }
                    }, 500);
                } else {
                    console.error('window.bankCards:', window.bankCards);
                    throw new Error('–ú–æ–¥—É–ª—å bankCards –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫.');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫:', error);
                const errorMessage = error.message || '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏';
                grid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; background: rgba(255,90,95,.1); border-radius: 16px; border: 2px solid rgba(255,90,95,.3);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">‚ö†Ô∏è</div>
                        <h3 style="color: rgba(255,90,95,.9); margin-bottom: 0.5rem;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h3>
                        <p style="color: rgba(255,255,255,.7); margin-bottom: 1rem;">${errorMessage}</p>
                        <button onclick="location.reload()" style="padding: 0.75rem 1.5rem; background: rgba(99,166,255,.3); color: rgba(255,255,255,.9); border: 1px solid rgba(99,166,255,.5); border-radius: 12px; cursor: pointer; font-weight: 600;">
                            –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
                        </button>
                    </div>
                `;
            }
        }, delay);
    })();
</script>
</body>
</html>

<script>
    document.addEventListener('click', async (e) => {
      const btn = e.target.closest('.copy-btn');
      if (!btn) return;

      const targetSelector = btn.dataset.copyTarget;
      const codeEl = document.querySelector(targetSelector);
      if (!codeEl) return;

      const text = codeEl.innerText;

      try {
        await navigator.clipboard.writeText(text);
        const original = btn.textContent;
        btn.textContent = 'Copied!';
        btn.classList.add('copied');

        setTimeout(() => {
          btn.textContent = original;
          btn.classList.remove('copied');
        }, 1200);
      } catch (err) {
        console.error('Copy failed', err);
      }
    });
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
<script>hljs.highlightAll();</script>