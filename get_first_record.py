"""
–ö–ê–ö –ü–û–õ–£–ß–ò–¢–¨ –ü–ï–†–í–£–Æ –ó–ê–ü–ò–°–¨ –ò–ó –ë–î

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä–≤–æ–π –∑–∞–ø–∏—Å–∏.
"""
import sys
sys.path.insert(0, '.')

from app.database import SessionLocal
from app.models.board import Board
from app.models.user import User
from app.models.task import Task


db = SessionLocal()

try:
    print("=" * 70)
    print("–°–ü–û–°–û–ë–´ –ü–û–õ–£–ß–ï–ù–ò–Ø –ü–ï–†–í–û–ô –ó–ê–ü–ò–°–ò")
    print("=" * 70)
    
    # ============================================
    # –°–ü–û–°–û–ë 1: .first() - –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø
    # ============================================
    print("\n1. –ú–ï–¢–û–î .first() - –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø")
    print("   " + "-" * 60)
    
    # –í–∞—à –ø—Ä–∏–º–µ—Ä - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π!
    board = db.query(Board).filter_by(created_by=2).first()
    
    if board:
        print(f"   ‚úì –ù–∞–π–¥–µ–Ω–∞ –¥–æ—Å–∫–∞: {board.title} (ID: {board.id})")
    else:
        print("   ‚ö† –î–æ—Å–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ (–≤–µ—Ä–Ω—É–ª—Å—è None)")
    
    print("\n   –°–∏–Ω—Ç–∞–∫—Å–∏—Å:")
    print("   result = db.query(Model).filter_by(field=value).first()")
    print("\n   –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:")
    print("   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –û–î–ò–ù –æ–±—ä–µ–∫—Ç –∏–ª–∏ None")
    print("   - –ï—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –Ω–µ—Ç ‚Üí –≤–µ—Ä–Ω—ë—Ç None")
    print("   - –ï—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –º–Ω–æ–≥–æ ‚Üí –≤–µ—Ä–Ω—ë—Ç –ü–ï–†–í–£–Æ")
    print("   - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –∑–∞–ø–∏—Å–∏")
    
    # ============================================
    # –°–ü–û–°–û–ë 2: .one() - –¢–û–ß–ù–û –û–î–ù–ê –ó–ê–ü–ò–°–¨
    # ============================================
    print("\n2. –ú–ï–¢–û–î .one() - –¢–û–ß–ù–û –û–î–ù–ê –ó–ê–ü–ò–°–¨")
    print("   " + "-" * 60)
    
    try:
        # .one() —Ç—Ä–µ–±—É–µ—Ç —á—Ç–æ–±—ã –±—ã–ª–∞ –†–û–í–ù–û –û–î–ù–ê –∑–∞–ø–∏—Å—å
        user = db.query(User).filter_by(id=1).one()
        print(f"   ‚úì –ù–∞–π–¥–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {user.username}")
    except Exception as e:
        print(f"   ‚ö† –û—à–∏–±–∫–∞: {e}")
        print("   (–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID=1 –Ω–µ—Ç)")
    
    print("\n   –°–∏–Ω—Ç–∞–∫—Å–∏—Å:")
    print("   result = db.query(Model).filter_by(field=value).one()")
    print("\n   –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:")
    print("   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –û–î–ò–ù –æ–±—ä–µ–∫—Ç")
    print("   - –ï—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –ù–ï–¢ ‚Üí –≤—ã–∑–æ–≤–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ")
    print("   - –ï—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –ú–ù–û–ì–û ‚Üí –≤—ã–∑–æ–≤–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ")
    print("   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–≥–¥–∞ —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ –∑–∞–ø–∏—Å—å –æ–¥–Ω–∞")
    
    # ============================================
    # –°–ü–û–°–û–ë 3: .one_or_none() - –û–î–ù–ê –ò–õ–ò –ù–ï–¢
    # ============================================
    print("\n3. –ú–ï–¢–û–î .one_or_none() - –û–î–ù–ê –ò–õ–ò –ù–ï–¢")
    print("   " + "-" * 60)
    
    board_one = db.query(Board).filter_by(id=1).one_or_none()
    
    if board_one:
        print(f"   ‚úì –ù–∞–π–¥–µ–Ω–∞ –¥–æ—Å–∫–∞: {board_one.title}")
    else:
        print("   ‚ö† –î–æ—Å–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
    
    print("\n   –°–∏–Ω—Ç–∞–∫—Å–∏—Å:")
    print("   result = db.query(Model).filter_by(field=value).one_or_none()")
    print("\n   –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:")
    print("   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –û–î–ò–ù –æ–±—ä–µ–∫—Ç –∏–ª–∏ None")
    print("   - –ï—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –ù–ï–¢ ‚Üí –≤–µ—Ä–Ω—ë—Ç None")
    print("   - –ï—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –ú–ù–û–ì–û ‚Üí –≤—ã–∑–æ–≤–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ")
    print("   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–≥–¥–∞ –æ–∂–∏–¥–∞–µ—Ç–µ 0 –∏–ª–∏ 1 –∑–∞–ø–∏—Å—å")
    
    # ============================================
    # –°–ü–û–°–û–ë 4: –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è [0] - –ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø
    # ============================================
    print("\n4. –ò–ù–î–ï–ö–°–ê–¶–ò–Ø [0] - –ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø")
    print("   " + "-" * 60)
    
    try:
        boards_list = db.query(Board).filter_by(created_by=2).all()
        if boards_list:
            board_index = boards_list[0]  # –ü–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
            print(f"   ‚úì –ù–∞–π–¥–µ–Ω–∞ –¥–æ—Å–∫–∞: {board_index.title}")
        else:
            print("   ‚ö† –°–ø–∏—Å–æ–∫ –ø—É—Å—Ç")
    except IndexError:
        print("   ‚ùå –û—à–∏–±–∫–∞: —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç")
    
    print("\n   –°–∏–Ω—Ç–∞–∫—Å–∏—Å:")
    print("   result = db.query(Model).filter_by(field=value).all()[0]")
    print("\n   –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:")
    print("   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –í–°–ï –∑–∞–ø–∏—Å–∏ –≤ –ø–∞–º—è—Ç—å")
    print("   - –ï—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –Ω–µ—Ç ‚Üí IndexError")
    print("   - –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º .first()")
    print("   - –ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å")
    
    # ============================================
    # –°–†–ê–í–ù–ï–ù–ò–ï –ú–ï–¢–û–î–û–í
    # ============================================
    print("\n" + "=" * 70)
    print("–°–†–ê–í–ù–ï–ù–ò–ï –ú–ï–¢–û–î–û–í")
    print("=" * 70)
    
    print("\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê")
    print("‚îÇ –ú–µ—Ç–æ–¥       ‚îÇ –ï—Å–ª–∏ 0 –∑–∞–ø–∏—Å–µ–π‚îÇ –ï—Å–ª–∏ 1 –∑–∞–ø–∏—Å—å‚îÇ –ï—Å–ª–∏ –º–Ω–æ–≥–æ   ‚îÇ")
    print("‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§")
    print("‚îÇ .first()    ‚îÇ None         ‚îÇ –û–±—ä–µ–∫—Ç       ‚îÇ –ü–µ—Ä–≤–∞—è       ‚îÇ")
    print("‚îÇ .one()      ‚îÇ –ò—Å–∫–ª—é—á–µ–Ω–∏–µ   ‚îÇ –û–±—ä–µ–∫—Ç       ‚îÇ –ò—Å–∫–ª—é—á–µ–Ω–∏–µ   ‚îÇ")
    print("‚îÇ .one_or_none‚îÇ None         ‚îÇ –û–±—ä–µ–∫—Ç       ‚îÇ –ò—Å–∫–ª—é—á–µ–Ω–∏–µ   ‚îÇ")
    print("‚îÇ .all()[0]   ‚îÇ IndexError   ‚îÇ –û–±—ä–µ–∫—Ç       ‚îÇ –ü–µ—Ä–≤–∞—è       ‚îÇ")
    print("‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò")
    
    # ============================================
    # –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ò–ú–ï–†–´
    # ============================================
    print("\n" + "=" * 70)
    print("–ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ò–ú–ï–†–´")
    print("=" * 70)
    
    # –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—É—é –¥–æ—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    print("\n–ü—Ä–∏–º–µ—Ä 1: –ü–µ—Ä–≤–∞—è –¥–æ—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID=2")
    board_example = db.query(Board).filter_by(created_by=2).first()
    if board_example:
        print(f"   ‚úì –î–æ—Å–∫–∞: {board_example.title}")
    else:
        print("   ‚ö† –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –¥–æ—Å–æ–∫")
    
    # –ü—Ä–∏–º–µ—Ä 2: –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email
    print("\n–ü—Ä–∏–º–µ—Ä 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ email")
    user_example = db.query(User).filter_by(email="admin@test.com").first()
    if user_example:
        print(f"   ‚úì –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {user_example.username}")
    else:
        print("   ‚ö† –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω")
    
    # –ü—Ä–∏–º–µ—Ä 3: –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É –Ω–∞ –¥–æ—Å–∫–µ
    print("\n–ü—Ä–∏–º–µ—Ä 3: –ü–µ—Ä–≤–∞—è –∑–∞–¥–∞—á–∞ –Ω–∞ –¥–æ—Å–∫–µ —Å ID=1")
    task_example = db.query(Task).filter_by(board_id=1).first()
    if task_example:
        print(f"   ‚úì –ó–∞–¥–∞—á–∞: {task_example.title}")
    else:
        print("   ‚ö† –ù–∞ –¥–æ—Å–∫–µ –Ω–µ—Ç –∑–∞–¥–∞—á")
    
    # –ü—Ä–∏–º–µ—Ä 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è
    print("\n–ü—Ä–∏–º–µ—Ä 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏")
    board_exists = db.query(Board).filter_by(id=999).first() is not None
    print(f"   –î–æ—Å–∫–∞ —Å ID=999 —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {board_exists}")
    
    # –ü—Ä–∏–º–µ—Ä 5: –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å –ë–ï–ó —Ñ–∏–ª—å—Ç—Ä–∞
    print("\n–ü—Ä–∏–º–µ—Ä 5: –ü–µ—Ä–≤–∞—è –¥–æ—Å–∫–∞ –≤ –ë–î (–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞)")
    first_board = db.query(Board).first()
    if first_board:
        print(f"   ‚úì –ü–µ—Ä–≤–∞—è –¥–æ—Å–∫–∞: {first_board.title} (ID: {first_board.id})")
    else:
        print("   ‚ö† –í –ë–î –Ω–µ—Ç –¥–æ—Å–æ–∫")
    
    print("\n" + "=" * 70)
    print("‚úì –í–°–ï –ü–†–ò–ú–ï–†–´ –í–´–ü–û–õ–ù–ï–ù–´")
    print("=" * 70)
    
    print("\nüí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:")
    print("   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ .first() - —ç—Ç–æ —Å–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–±!")
    print("   –í–∞—à –∫–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: board = db.query(Board).filter_by(created_by=2).first()")
    
except Exception as e:
    print(f"\n‚ùå –û—à–∏–±–∫–∞: {e}")
    import traceback
    traceback.print_exc()
finally:
    db.close()













