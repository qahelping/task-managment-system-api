# –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ë–î](#-–æ—Ç–∫—É–¥–∞-–±–µ—Ä–µ—Ç—Å—è-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è-–æ-–±–¥)
- [–ú–µ—Ç–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `init_db()`](#-–º–µ—Ç–æ–¥-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏-init_db)
- [–ú–µ—Ç–æ–¥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è `SessionLocal()`](#-–º–µ—Ç–æ–¥-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è-sessionlocal)
- [–ü–æ–ª–Ω—ã–π –ø—É—Ç—å –¥–∞–Ω–Ω—ã—Ö](#-–ø–æ–ª–Ω—ã–π-–ø—É—Ç—å-–¥–∞–Ω–Ω—ã—Ö)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#-–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

---

## üîç –û—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ë–î

### 1. –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `app/core/config.py`

```python
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""
    
    # URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö - –û–¢–°–Æ–î–ê –ë–ï–†–Å–¢–°–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ë–î!
    DATABASE_URL: str = "sqlite:///./app.db"  # –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    
    class Config:
        env_file = ".env"  # –ú–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ .env —Ñ–∞–π–ª
        case_sensitive = True

settings = Settings()  # –°–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. **–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `DATABASE_URL = "sqlite:///./app.db"`
   - –ï—Å–ª–∏ –Ω–µ—Ç `.env` —Ñ–∞–π–ª–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ
   - `sqlite:///` - –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è SQLite
   - `./app.db` - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –ë–î (–≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏)

2. **–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `.env` —Ñ–∞–π–ª** (–µ—Å–ª–∏ –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç):
   ```
   DATABASE_URL=sqlite:///./my_database.db
   ```
   - Pydantic –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `.env`
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: `.env` > –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### 2. –§–æ—Ä–º–∞—Ç DATABASE_URL

**SQLite (—Ç–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç):**
```
sqlite:///./app.db          # –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å
sqlite:////absolute/path.db # –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
```

**PostgreSQL (–ø—Ä–∏–º–µ—Ä):**
```
postgresql://user:password@localhost:5432/dbname
```

**MySQL (–ø—Ä–∏–º–µ—Ä):**
```
mysql://user:password@localhost:3306/dbname
```

---

## üöÄ –ú–µ—Ç–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `init_db()`

### –ö–æ–¥ –º–µ—Ç–æ–¥–∞:

```python
def init_db():
    """
    –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
    –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü.
    """
    # –®–ê–ì 1: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≤—Å–µ –º–æ–¥–µ–ª–∏
    from app.models import user, board, task, board_member, comment, audit_log
    
    # –®–ê–ì 2: –°–æ–∑–¥–∞—ë–º –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–æ–¥–µ–ª–µ–π
    Base.metadata.create_all(bind=engine)
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—à–∞–≥–æ–≤–æ:

#### –®–ê–ì 1: –ò–º–ø–æ—Ä—Ç –º–æ–¥–µ–ª–µ–π
```python
from app.models import user, board, task, board_member, comment, audit_log
```

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?**
- SQLAlchemy –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (`Base.metadata`)
- –ö–æ–≥–¥–∞ –º—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥–µ–ª–∏ (User, Board, Task –∏ —Ç.–¥.), –æ–Ω–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ `Base.metadata`
- –ë–µ–∑ –∏–º–ø–æ—Ä—Ç–∞ SQLAlchemy –Ω–µ –∑–Ω–∞–µ—Ç –∫–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å!

**–ü—Ä–∏–º–µ—Ä –º–æ–¥–µ–ª–∏:**
```python
# app/models/user.py
class User(Base):  # –ù–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç Base
    __tablename__ = "users"
    id = Column(Integer, primary_key=True)
    username = Column(String)
    # ...
```

#### –®–ê–ì 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
```python
Base.metadata.create_all(bind=engine)
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç `create_all()`:**
1. –°–º–æ—Ç—Ä–∏—Ç –Ω–∞ –≤—Å–µ –º–æ–¥–µ–ª–∏, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤ `Base.metadata`
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ª–∏ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
3. **–°–æ–∑–¥–∞—ë—Ç —Ç–æ–ª—å–∫–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã** (–Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ!)
4. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `engine` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

**–í–∞–∂–Ω–æ:**
- –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç - –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç
- –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü –Ω–µ—Ç - —Å–æ–∑–¥–∞—ë—Ç –∏—Ö
- –≠—Ç–æ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (–º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ)

---

## üîå –ú–µ—Ç–æ–¥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è `SessionLocal()`

### –ö–∞–∫ —Å–æ–∑–¥–∞—ë—Ç—Å—è `SessionLocal`:

```python
# app/database.py

# 1. –°–æ–∑–¥–∞—ë–º –¥–≤–∏–∂–æ–∫ (engine) - —ç—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
engine = create_engine(
    settings.DATABASE_URL,  # –û—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è URL - —Å–º. –≤—ã—à–µ
    connect_args={"check_same_thread": False}  # –î–ª—è SQLite
)

# 2. –°–æ–∑–¥–∞—ë–º —Ñ–∞–±—Ä–∏–∫—É —Å–µ—Å—Å–∏–π
SessionLocal = sessionmaker(
    autocommit=False,    # –ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    autoflush=False,     # –ù–µ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    bind=engine          # –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –¥–≤–∏–∂–∫—É
)
```

### –ß—Ç–æ —Ç–∞–∫–æ–µ `engine`?

**`engine`** - —ç—Ç–æ –æ–±—ä–µ–∫—Ç SQLAlchemy, –∫–æ—Ç–æ—Ä—ã–π:
- –•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –ë–î
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø—É–ª–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –í—ã–ø–æ–ª–Ω—è–µ—Ç SQL –∑–∞–ø—Ä–æ—Å—ã
- **–°–æ–∑–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

### –ß—Ç–æ —Ç–∞–∫–æ–µ `SessionLocal`?

**`SessionLocal`** - —ç—Ç–æ —Ñ–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–π:
- –≠—Ç–æ **–Ω–µ —Å–µ—Å—Å–∏—è**, –∞ **—Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–π**
- –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ `SessionLocal()` —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é
- –°–µ—Å—Å–∏—è - —ç—Ç–æ –µ–¥–∏–Ω–∏—Ü–∞ —Ä–∞–±–æ—Ç—ã —Å –ë–î

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```python
# –°–æ–∑–¥–∞—ë–º —Å–µ—Å—Å–∏—é
db = SessionLocal()

try:
    # –†–∞–±–æ—Ç–∞–µ–º —Å –ë–î —á–µ—Ä–µ–∑ —Å–µ—Å—Å–∏—é
    user = User(username="test")
    db.add(user)
    db.commit()
finally:
    db.close()  # –í–∞–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å —Å–µ—Å—Å–∏—é!
```

---

## üìä –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã:

```
1. app/core/config.py
   ‚îî‚îÄ> Settings.DATABASE_URL = "sqlite:///./app.db"
       ‚îî‚îÄ> (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —á–µ—Ä–µ–∑ .env)

2. app/database.py
   ‚îî‚îÄ> from app.core.config import settings
   ‚îî‚îÄ> engine = create_engine(settings.DATABASE_URL)
   ‚îî‚îÄ> SessionLocal = sessionmaker(bind=engine)

3. init_db()
   ‚îî‚îÄ> from app.models import ... (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π)
   ‚îî‚îÄ> Base.metadata.create_all(bind=engine)
       ‚îî‚îÄ> –°–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î

4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
   ‚îî‚îÄ> db = SessionLocal()  # –°–æ–∑–¥–∞—ë–º —Å–µ—Å—Å–∏—é
   ‚îî‚îÄ> db.add(...)          # –î–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
   ‚îî‚îÄ> db.commit()          # –°–æ—Ö—Ä–∞–Ω—è–µ–º
   ‚îî‚îÄ> db.close()           # –ó–∞–∫—Ä—ã–≤–∞–µ–º
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```python
from app.database import SessionLocal, init_db

# 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü)
init_db()

# 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏
db = SessionLocal()

try:
    # 3. –†–∞–±–æ—Ç–∞ —Å –ë–î
    # ...
finally:
    db.close()
```

### –ü—Ä–∏–º–µ—Ä 2: –û—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è DATABASE_URL

```python
# –ü—Ä–æ–≤–µ—Ä–∏–º –æ—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è URL
from app.core.config import settings

print(f"URL –ë–î: {settings.DATABASE_URL}")
# –í—ã–≤–æ–¥: sqlite:///./app.db

# –ï—Å–ª–∏ –µ—Å—Ç—å .env —Ñ–∞–π–ª —Å DATABASE_URL=..., 
# —Ç–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ .env
```

### –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü

```python
from app.database import engine, Base
from sqlalchemy import inspect

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
inspector = inspect(engine)
tables = inspector.get_table_names()
print(f"–¢–∞–±–ª–∏—Ü—ã –≤ –ë–î: {tables}")
# –í—ã–≤–æ–¥: ['users', 'boards', 'tasks', ...]
```

### –ü—Ä–∏–º–µ—Ä 4: –°–æ–∑–¥–∞–Ω–∏–µ –¥–≤–∏–∂–∫–∞ –≤—Ä—É—á–Ω—É—é

```python
from sqlalchemy import create_engine

# –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–≤–∏–∂–æ–∫ –Ω–∞–ø—Ä—è–º—É—é
custom_engine = create_engine("sqlite:///./custom.db")

# –ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–π
from sqlalchemy.orm import sessionmaker
CustomSession = sessionmaker(bind=custom_engine)
```

---

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã `create_engine()`

### –î–ª—è SQLite:

```python
engine = create_engine(
    "sqlite:///./app.db",
    connect_args={"check_same_thread": False}  # –í–∞–∂–Ω–æ –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏!
)
```

**`check_same_thread=False`:**
- SQLite –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–æ–º –∂–µ –ø–æ—Ç–æ–∫–µ
- FastAPI —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö
- –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É

### –î–ª—è PostgreSQL:

```python
engine = create_engine(
    "postgresql://user:pass@localhost/dbname",
    pool_size=10,           # –†–∞–∑–º–µ—Ä –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    max_overflow=20,        # –ú–∞–∫—Å–∏–º—É–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    echo=True               # –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
)
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–¥–∏–Ω —Ä–∞–∑
```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –≤—ã–∑—ã–≤–∞–µ–º –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
init_db()

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –Ω–µ –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π
db = SessionLocal()
init_db()  # –ù–ï –ù–£–ñ–ù–û!
```

### 2. –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–µ—Å—Å–∏–π
```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
db = SessionLocal()
try:
    # —Ä–∞–±–æ—Ç–∞ —Å –ë–î
finally:
    db.close()

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - —É—Ç–µ—á–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
db = SessionLocal()
# –∑–∞–±—ã–ª–∏ –∑–∞–∫—Ä—ã—Ç—å!
```

### 3. –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
db.add(user)
db.commit()  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è
db.add(user)
# –∑–∞–±—ã–ª–∏ commit!
```

---

## üìù –†–µ–∑—é–º–µ

1. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ë–î** –±–µ—Ä—ë—Ç—Å—è –∏–∑ `app/core/config.py` ‚Üí `settings.DATABASE_URL`
2. **–ú–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è** —á–µ—Ä–µ–∑ `.env` —Ñ–∞–π–ª
3. **`init_db()`** —Å–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–æ–¥–µ–ª–µ–π
4. **`SessionLocal()`** —Å–æ–∑–¥–∞—ë—Ç —Å–µ—Å—Å–∏—é –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
5. **`engine`** - —ç—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î, —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
6. **–°–µ—Å—Å–∏—è** - —ç—Ç–æ –µ–¥–∏–Ω–∏—Ü–∞ —Ä–∞–±–æ—Ç—ã, —Å–æ–∑–¥–∞—ë—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

---

## üéØ –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞

```python
# –ò–º–ø–æ—Ä—Ç—ã
from app.database import SessionLocal, init_db, engine
from app.core.config import settings

# –ü—Ä–æ–≤–µ—Ä–∫–∞ URL –ë–î
print(settings.DATABASE_URL)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
init_db()

# –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏
db = SessionLocal()

# –†–∞–±–æ—Ç–∞
db.add(...)
db.commit()

# –ó–∞–∫—Ä—ã—Ç–∏–µ
db.close()
```



